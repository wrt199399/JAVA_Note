# 一、基础部分

## 1.线程执行原理

**栈与栈帧**

Java Virtual Machine Stacks （Java 虚拟机栈）

我们都知道 JVM 中由堆、栈、方法区所组成，其中栈内存是给谁用的呢？其实就是线程，每个线程启动后，虚拟

机就会为其分配一块栈内存。

每个栈由多个栈帧（Frame）组成，对应着每次方法调用时所占用的内存

每个线程只能有一个活动栈帧，对应着当前正在执行的那个方法

![image-20200416202834866](F:\java学习笔记\java并发编程\java架构之路笔记\image-20200416202834866.png)

## 2.创建线程的方式

继承Thread，实现Runnable，线程池 

```java
public class T02_HowToCreateThread {
    static class MyThread extends Thread {
        @Override
        public void run() {
            System.out.println("Hello MyThread!");
        }
    }

    static class MyRun implements Runnable {
        @Override
        public void run() {
            System.out.println("Hello MyRun!");
        }
    }

    public static void main(String[] args) {
        new MyThread().start();
        new Thread(new MyRun()).start();
        new Thread(()->{
            System.out.println("Hello Lambda!");
        }).start();
        
    }

}
//Executors.newCachedThreadPool
```

​    不同的写法：

Lambda

`Runnable task2 = () -> log.debug("hello");`

## 3.查看线程的方式

> jstack <PID> 查看某个 Java 进程（PID）的所有线程状态
>
> jconsole 来查看某个 Java 进程中线程的运行情况（图形界面）
>
> jconsole 远程监控配置:
>
> 需要以如下方式运行你的 java 类
>
> 修改 /etc/hosts 文件将 127.0.0.1 映射至主机名
>
> 如果要认证访问，还需要做如下步骤
>
> 复制 jmxremote.password 文件
>
> 修改 jmxremote.password 和 jmxremote.access 文件的权限为 600 即文件所有者可读写
>
> 连接时填入 controlRole（用户名），R&D（密码）